<?php/** * メモ用をAJAX処理 *  * @access public * @author 川端洋平 * @version 0.0.1 * @since 2012/08/29 *///// 設定ファイル読み込み ////require_once '../../lib-machine.php';try {    //// 認証 ////    Auth::isAuth('machine');        if($_SERVER["REQUEST_METHOD"] == "POST") {            $action = Req::post('action');        $target = Req::post('target');        $d      = Req::post('data');                $res = '';                if ($action == "getGenreList") {            //// 在庫機械情報を取得 ////            $id = $data['id'];            $data = array(                'category' => $d['category'],                'title'    => $d['title'],                'contents' => $d['contents'],                'machines' => $d['machines'],            );                        /// 画像ファイルを実ディレクトリに移動 ////            $f = new File();            $data['imgs'] = $f->check(                (array)$d['imgs'],                 (array)$d['imgs_delete'],                 $_conf->tmp_path,                $_conf->htdocs_path . '/media/machine'            );                }            }                echo json_encode($res);} catch (Exception $e) {    echo $e->getMessage();}